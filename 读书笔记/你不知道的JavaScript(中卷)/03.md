## 第五章 语法

#### 表达式的副作用

```js
var a = 42;
var b = a++;

a;  // 43
b;  // 42


var c = 42;

c++;  // 42
c;    // 43

++c;  // 44
c;    // 44
```

- `++` 在前面的时候，如 `++a`，副作用（如 `a` 递增）产生在表达式返回结果之前，而 `a++` 的副作用则产生在之后

- 可以使用 `","`（逗号运算符）将多个独立的表达式串联成一个语句

```js
// 由于运算符的优先级，a++, a 需要放到 () 中
var a = 42, b;
b = (a++, a);

a;  // 43
b;  // 43
```

- 组合赋值运算符，如 `+=` 和 `-=` 也是如此，比如 `a = b += 2`，先执行 `b += 2（b = b + 2）`，然后结果在赋值给 `a`

- 关于 `var a = b = 2`，严格模式会报错（没有声明 `b`），这会在无意间创建一个全局变量 


#### 运算符优先级

- 用 `","` 来连接一系列语句的时候，它的优先级最低，其他操作数的优先级逗比它高

完整列表见： [运算符优先级](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence)

```
. [] ()	        // 字段访问、数组下标、函数调用以及表达式分组
++ -- - ~ ! 	// 一元运算符、返回数据类型、对象创建、未定义值
* / %	        // 乘法、除法、取模
+ - +	        // 加法、减法、字符串连接
== != === !==	// 等于、不等于、严格相等、非严格相等
&	            // 按位与
|	            // 按位或
&&	            // 逻辑与
||	            // 逻辑或
?:	            // 条件
,	            // 多重求值
```

- 一个示例：

```js
var a = 42;
var b = "foo";
var c = false;

var d = a && b || c ? c || b ? a : c && b : a;

d;  // 42

// 上例可以分解为  ===>

var d = ((a && b) || c) ? ((c || b) ? a : (c && b)) : a;

var d = ((a && b) || c) 
        ? 
        ((c || b) ? a : (c && b)) 
        : 
        a;
```