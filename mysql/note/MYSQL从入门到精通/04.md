## 表结构的增删改查

#### 数据的插入（增）

```js
// 新建立一个学生表
create table stu(
    id int unsigned not null auto_increment,
    name varchar(30) not null,
    age tinyint unsigned not null,
    birthday datetime,
    address varchar(50),
    score decimal(4, 1),
    primary key(id)
)engine=myisam auto_increment = 201201 default charset=utf8;

// ===> 

+----------+---------------------+------+-----+---------+----------------+
| Field    | Type                | Null | Key | Default | Extra          |
+----------+---------------------+------+-----+---------+----------------+
| id       | int(10) unsigned    | NO   | PRI | NULL    | auto_increment |
| name     | varchar(30)         | NO   |     | NULL    |                |
| age      | tinyint(3) unsigned | NO   |     | NULL    |                |
| birthday | datetime            | YES  |     | NULL    |                |
| address  | varchar(50)         | YES  |     | NULL    |                |
| score    | decimal(4,1)        | YES  |     | NULL    |                |
+----------+---------------------+------+-----+---------+----------------+
```

关于 ```birthday```

一般不直接存储年龄，而是存储出生日期


```insert``` （插入数据）

```js
insert into stu values(null, "张三", "18", "2005-2-4", "bj", "65");

// into 可以省略（仅限 mysql 中，oracle 中不加则报错，建议全都加上）
insert stu values(null, "李四", "19", "2006-6-6", "sh", "68.5");

// 也可以一次插入多条数据
insert stu values(null, "王五", "20", "20106-7-8", "sz", "90"), (null, "赵六", "19", "1996-5-6", "gz", "80.5");

// 也可以只插入部分数据
insert stu(name, age, score) values("孙七", "18", "85"), ("钱八", "22", "88");

// replace 插入
replace into stu(name, age, score) values("梁九", "15", "76"), ("刘十", "26", 95);

// replace 与 insert 的区别
// replace 可以插入也可以替换，在主键存在的情况下，replace 会直接替换数据
replace into stu values(201206, "真钱八", "28", "2018-08-18", "ss", "98");

// ===>

+--------+--------+-----+---------------------+---------+-------+
| id     | name   | age | birthday            | address | score |
+--------+--------+-----+---------------------+---------+-------+
| 201201 | 张三   |  18 | 2005-02-04 00:00:00 | bj      |  60.0 |
| 201202 | 李四   |  19 | 2006-06-06 00:00:00 | sh      |  60.5 |
| 201203 | 王五   |  20 | 0000-00-00 00:00:00 | sz      |  60.5 |
| 201204 | 赵六   |  19 | 1996-05-06 00:00:00 | gz      |  60.5 |
| 201205 | 孙七   |  18 | NULL                | NULL    |  NULL |
| 201206 | 真钱八 |  28 | 2018-08-18 00:00:00 | ss      |  98.0 |
| 201207 | 梁九   |  15 | NULL                | NULL    |  NULL |
| 201208 | 刘十   |  26 | NULL                | NULL    |  NULL |
+--------+--------+-----+---------------------+---------+-------+

// 还可以复制表，即把当前表内容复制一份在插入其中
insert into stu(name, age, birthday, address, score) select name, age, birthday, address, score from stu;

// ===>

+--------+--------+-----+---------------------+---------+-------+
| id     | name   | age | birthday            | address | score |
+--------+--------+-----+---------------------+---------+-------+
| 201201 | 张三   |  18 | 2005-02-04 00:00:00 | bj      |  60.0 |
| 201202 | 李四   |  19 | 2006-06-06 00:00:00 | sh      |  60.5 |
| 201203 | 王五   |  20 | 0000-00-00 00:00:00 | sz      |  60.5 |
| 201204 | 赵六   |  19 | 1996-05-06 00:00:00 | gz      |  60.5 |
| 201205 | 孙七   |  18 | NULL                | NULL    |  NULL |
| 201206 | 真钱八 |  28 | 2018-08-18 00:00:00 | ss      |  98.0 |
| 201207 | 梁九   |  15 | NULL                | NULL    |  NULL |
| 201208 | 刘十   |  26 | NULL                | NULL    |  NULL |
| 201209 | 张三   |  18 | 2005-02-04 00:00:00 | bj      |  60.0 |
| 201210 | 李四   |  19 | 2006-06-06 00:00:00 | sh      |  60.5 |
| 201211 | 王五   |  20 | 0000-00-00 00:00:00 | sz      |  60.5 |
| 201212 | 赵六   |  19 | 1996-05-06 00:00:00 | gz      |  60.5 |
| 201213 | 孙七   |  18 | NULL                | NULL    |  NULL |
| 201214 | 真钱八 |  28 | 2018-08-18 00:00:00 | ss      |  98.0 |
| 201215 | 梁九   |  15 | NULL                | NULL    |  NULL |
| 201216 | 刘十   |  26 | NULL                | NULL    |  NULL |
+--------+--------+-----+---------------------+---------+-------+
```


#### 删除数据（删）

```js
delete from stu where id = 201216;

// ===>

+--------+--------+-----+---------------------+---------+-------+
| id     | name   | age | birthday            | address | score |
+--------+--------+-----+---------------------+---------+-------+
| 201201 | 张三   |  18 | 2005-02-04 00:00:00 | bj      |  60.0 |
| 201202 | 李四   |  19 | 2006-06-06 00:00:00 | sh      |  60.5 |
| 201203 | 王五   |  20 | 2008-08-08 00:00:00 | wh      |  80.0 |
| 201204 | 赵六   |  19 | 1996-05-06 00:00:00 | gz      |  60.5 |
| 201205 | 孙七   |  18 | NULL                | NULL    |  NULL |
| 201206 | 真钱八 |  28 | 2018-08-18 00:00:00 | ss      |  98.0 |
| 201207 | 梁九   |  15 | NULL                | NULL    |  NULL |
| 201208 | 刘十   |  26 | NULL                | NULL    |  NULL |
| 201209 | 张三   |  18 | 2005-02-04 00:00:00 | bj      |  60.0 |
| 201210 | 李四   |  19 | 2006-06-06 00:00:00 | sh      |  60.5 |
| 201211 | 王五   |  20 | 0000-00-00 00:00:00 | sz      |  60.5 |
| 201212 | 赵六   |  19 | 1996-05-06 00:00:00 | gz      |  60.5 |
| 201213 | 孙七   |  18 | NULL                | NULL    |  NULL |
| 201214 | 真钱八 |  28 | 2018-08-18 00:00:00 | ss      |  98.0 |
| 201215 | 梁九   |  15 | NULL                | NULL    |  NULL |
+--------+--------+-----+---------------------+---------+-------+

// 无条件，删除所有记录
delete from stu;

// 还可以直接清空（全部删除）数据表记录，auto_increment 自动编号从 1 重新分配
// 用的较少
truncate table stu;
```



#### update（修改数据）

```js
update stu set score = 80, address = "wh", birthday = "2008-08-08" where id = 201203;

// ===>

+--------+------+-----+---------------------+---------+-------+
| id     | name | age | birthday            | address | score |
+--------+------+-----+---------------------+---------+-------+
| 201203 | 王五 |  20 | 2008-08-08 00:00:00 | wh      |  80.0 |
+--------+------+-----+---------------------+---------+-------+
```


#### 查询数据（查）

```js
// 最基本的查询方式
select * from stu;

// ===>

// 去掉了重复的数据，然后整理更新了一下，用来查询
+--------+------+-----+------------+-------+
| id     | name | age | birthday   | score |
+--------+------+-----+------------+-------+
| 201209 | 张三 |  18 | 2005-02-04 |  65.0 |
| 201210 | 李四 |  19 | 2006-06-06 |  68.5 |
| 201211 | 王五 |  20 | 1995-02-06 |  90.0 |
| 201212 | 赵六 |  19 | 1991-03-16 |  80.5 |
| 201213 | 孙七 |  18 | 1992-05-06 |  85.0 |
| 201214 | 钱八 |  22 | 2002-12-16 |  88.0 |
| 201215 | 孙七 |  18 | 2008-08-08 |  85.0 |
| 201216 | 钱八 |  22 | 1998-08-28 |  88.0 |
| 201217 | 梁九 |  15 | 1988-01-02 |  76.0 |
| 201218 | 刘十 |  26 | 1989-11-22 |  95.0 |
+--------+------+-----+------------+-------+

// 只查询姓名和成绩
select name, score, from stu;

// ===>

+------+-------+
| name | score |
+------+-------+
| 张三 |  65.0 |
| 李四 |  68.5 |
| 王五 |  90.0 |
| 赵六 |  80.5 |
| 孙七 |  85.0 |
| 钱八 |  88.0 |
| 孙七 |  85.0 |
| 钱八 |  88.0 |
| 梁九 |  76.0 |
| 刘十 |  95.0 |
+------+-------+
```

查询的基本条件， ```<```，```>```，```<=```，```=>```，```=```，```!=```，```<>```

```js
// 查询分数小于 80 分的
select name, score from stu where score < 80;

// 等于 90 分的
select name, score from stu where score = 90;

// 省略一些

// 关于 != 和 <> 都表示否定，还有一个 not 也表示否定
select name, score from stu where score != 90;
select name, score from stu where score <> 90;
select name, score from stu where not score = 90;
```

范围查询，```between..and```

```js
// 查询分数在 80 ~ 90 之间，注意：包含 80 和 90
select name, score from stu where score between 80 and 90;

// 查询分数不在 80 ~ 90 之间
select name, score from stu where score not between 80 and 90;

// ===>

+------+-------+
| name | score |
+------+-------+
| 王五 |  90.0 |
| 赵六 |  80.5 |
| 孙七 |  85.0 |
| 钱八 |  88.0 |
| 孙七 |  85.0 |
| 钱八 |  88.0 |
+------+-------+
```

模糊查询 ```like```（```%``` 和 ```_```）

需要注意的是：如果查询语句中没有 ```like```，比如 ```select * from stu where name = "张%";```

查询语句不会报错，但是 ```%``` 不再是任意符号，因为判断的是等号，不再支持通配符

```js
// _ 表示一个任意字符，比如查询名字为两个字的用户
select name from stu where name like "__"

// 查询名字为两个字的而且是姓张的
select name from stu where name like "张_"

// % 表示零个或多个字符，比如查询姓名中含有三这个字的用户
select name from stu where name like "%三%"
```

基本条件 ```in```，后面接一个限定范围

```js
// 查询 id 为 201209, 201210, 201208 的三条数据
select * from stu where id in (201209, 201210, 201208);

// 也可以使用 not in 排除这三条数据
select * from stu where id not in (201209, 201210, 201208);
```

基本条件 ```null```

在查询的时候，比如某个字段的数据为 ```null``` 不能直接使用 ```= null```（还有一个 ```is not null```）

```js
// 不报错，但是查询为空（这个语句尽量不要出现）
select * from stu where score = null;

// 这个时候可以使用 is null
select * from stu where score is null;

// 然后可以批量处理这些数据，比如成绩为 null 的全部设为 0 分
update stu set score = 0 where score is null;


//---- 注意区分 "" 和 null


// 这个表示查询名字为空字符串的
select * from stu where name = "";

// 这个表示查询名子没有填写的
select * from stu where name is null;
```